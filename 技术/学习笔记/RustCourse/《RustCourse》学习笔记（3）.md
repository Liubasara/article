---
name: ã€ŠRustCourseã€‹å­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰
title: ã€ŠRustCourseã€‹å­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰
tags: ["æŠ€æœ¯","å­¦ä¹ ç¬”è®°","RustCourse"]
categories: å­¦ä¹ ç¬”è®°
info: "ç¬¬2ç«  RuståŸºæœ¬æ¦‚å¿µ 2.2.2 å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹ 2.2.3 è¯­å¥å’Œè¡¨è¾¾å¼ 2.2.4 å‡½æ•° 2.3 æ‰€æœ‰æƒå’Œå€Ÿç”¨"
time: 2024/2/1
desc: 'RustCourse, å­¦ä¹ ç¬”è®°'
keywords: ['RustCourse', 'å­¦ä¹ ç¬”è®°', 'rust']
---

# ã€ŠRustCourseã€‹å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰

## ç¬¬2ç«  RuståŸºæœ¬æ¦‚å¿µ

### 2.2 åŸºæœ¬ç±»å‹

#### 2.2.2 å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹

**å­—ç¬¦**

å­—ç¬¦ç±»å‹ï¼ˆcharï¼‰ç±»å‹å¯ä»¥ç†è§£ä¸ºè‹±æ–‡ä¸­çš„å­—å¹•ï¼Œä¸­æ–‡ä¸­çš„æ±‰å­—ã€‚Rust çš„å­—ç¬¦ä¸ä»…ä»…æ˜¯`ASCII`ï¼Œæ‰€æœ‰çš„`Unicode`å€¼éƒ½å¯ä»¥ä½œä¸º Rust å­—ç¬¦ï¼ŒåŒ…æ‹¬å•ä¸ªçš„ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€emoji ç­‰ç­‰ï¼Œéƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ç±»å‹ã€‚å­—ç¬¦ç±»å‹å’Œ`Unicode`éƒ½æ˜¯ 4 ä¸ªå­—èŠ‚ç¼–ç ã€‚

å’Œä¸€äº›è¯­è¨€ä¸åŒï¼ŒRust çš„å­—ç¬¦åªèƒ½ç”¨`''`æ¥è¡¨ç¤ºï¼Œ`""`æ˜¯ç•™ç»™å­—ç¬¦ä¸²çš„ã€‚

```rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let g = 'å›½';
    let heart_eyed_cat = 'ğŸ˜»';
}
```

**å¸ƒå°”ï¼ˆboolï¼‰**

Rust ä¸­çš„å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼štrue å’Œ falseã€‚å¸ƒå°”å€¼å ç”¨å†…å­˜çš„å¤§å°ä¸º 1 ä¸ªå­—èŠ‚ã€‚

**å•å…ƒç±»å‹**

å•å…ƒç±»å‹å°±æ˜¯`()`ï¼Œå”¯ä¸€çš„å€¼ä¹Ÿæ˜¯`()`ï¼Œæ¯”å¦‚`fn main()`å‡½æ•°çš„è¿”å›å€¼ç±»å‹å°±æ˜¯å•å…ƒç±»å‹ã€‚è¿”å›å•å…ƒç±»å‹çš„å‡½æ•°ä¸æ— è¿”å›å€¼å‡½æ•°å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼ŒRust å¯¹äºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°æœ‰å•ç‹¬çš„å®šä¹‰ï¼š`å‘æ•£å‡½æ•°(diverge function)`ã€‚

å¸¸è§çš„`println!()`çš„è¿”å›å€¼ä¹Ÿæ˜¯å•å…ƒç±»å‹ï¼Œå†æ¯”å¦‚å¯ä»¥ç”¨`()`ä½œä¸º map çš„å€¼ï¼Œè¿™è¡¨ç¤ºæˆ‘ä»¬ä¸å…³æ³¨å…·ä½“çš„å€¼ï¼Œåªå…³å¿ƒå®ƒå¯¹åº”çš„`key`ã€‚è¿™ä¸ªå€¼ä¹Ÿä¸ä¼šå ç”¨ä»»ä½•å†…å­˜ã€‚

#### 2.2.3 è¯­å¥å’Œè¡¨è¾¾å¼

> Rust çš„å‡½æ•°ä½“æ˜¯ç”±ä¸€ç³»åˆ—è¯­å¥ç»„æˆï¼Œæœ€åç”±ä¸€ä¸ªè¡¨è¾¾å¼æ¥è¿”å›å€¼ï¼Œä¾‹å¦‚ï¼š
>
> ```rust
> fn add_with_extra(x: i32, y: i32) -> i32 {
>     let x = x + 1; // è¯­å¥
>     let y = y + 5; // è¯­å¥
>     x + y // è¡¨è¾¾å¼
> }
> ```

åœ¨ Rust ä¸­ï¼Œ`è¯­å¥`æ˜¯ä¸ä¼šæœ‰è¿”å›å€¼çš„ï¼Œå› æ­¤åœ¨ rust ä¸­ï¼Œä¸èƒ½è¿™ä¹ˆå†™ï¼š`let b = (let a = 8);`

åœ¨ Rust ä¸­ï¼Œ`è¡¨è¾¾å¼`ä¼šè¿›è¡Œæ±‚å€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚æ¢å¥è¯è¯´ï¼Œåªè¦èƒ½è¿”å›å€¼çš„æ“ä½œï¼Œå®ƒå°±æ˜¯è¡¨è¾¾å¼ã€‚å¦‚æœè¡¨è¾¾å¼ä¸åæ‚”ä»»ä½•å€¼ï¼Œåˆ™ä¼šéšå¼åœ°è¿”å›ä¸€ä¸ª`()`ã€‚

```rust
fn main() {
    assert_eq!(ret_unit_type(), ())
}

fn ret_unit_type() {
    let x = 1;
    // if è¯­å¥å—ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› æ­¤å¯ä»¥ç”¨äºèµ‹å€¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿”å›
    // ç±»ä¼¼ä¸‰å…ƒè¿ç®—ç¬¦ï¼Œåœ¨Rusté‡Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™
    let y = if x % 2 == 1 {
        "odd"
    } else {
        "even"
    };
    // æˆ–è€…å†™æˆä¸€è¡Œ
    let z = if x % 2 == 1 { "odd" } else { "even" };
}
```

#### 2.2.4 å‡½æ•°

```rust
fn add(i: i32, j: i32) -> i32 {
   i + j
 }
```

- å‡½æ•°åå’Œå˜é‡åä½¿ç”¨[è›‡å½¢å‘½åæ³•(snake case)](https://course.rs/practice/naming.html)ï¼Œä¾‹å¦‚ `fn add_two() -> {}`
- å‡½æ•°çš„ä½ç½®å¯ä»¥éšä¾¿æ”¾ï¼ŒRust ä¸å…³å¿ƒæˆ‘ä»¬åœ¨å“ªé‡Œå®šä¹‰äº†å‡½æ•°ï¼Œåªè¦æœ‰å®šä¹‰å³å¯
- æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½éœ€è¦æ ‡æ³¨ç±»å‹

![2-1.png](./images/2-1.png)

**Rust ä¸­çš„ç‰¹æ®Šè¿”å›ç±»å‹**

**æ— è¿”å›å€¼`()`**

å•å…ƒç±»å‹æ˜¯ä¸€ä¸ªé›¶é•¿åº¦çš„å…ƒç»„ï¼Œç”¨äºè¡¨è¾¾ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼ã€‚æ—¢å¯ä»¥æ˜¾å¼è¿”å›ï¼Œä¹Ÿå¯ä»¥é»˜è®¤çš„éšå¼å®šä¹‰ã€‚

> ä¾‹å¦‚ä¸‹é¢çš„ `report` å‡½æ•°ä¼šéšå¼è¿”å›ä¸€ä¸ª `()`ï¼š
>
> ```rust
> use std::fmt::Debug;
> 
> fn report<T: Debug>(item: T) {
>   println!("{:?}", item);
> 
> }
> ```
>
> ä¸ä¸Šé¢çš„å‡½æ•°è¿”å›å€¼ç›¸åŒï¼Œä½†æ˜¯ä¸‹é¢çš„å‡½æ•°æ˜¾å¼çš„è¿”å›äº† `()`ï¼š
>
> ```rust
> fn clear(text: &mut String) -> () {
>   *text = String::from("");
> }
> ```

**æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•°`!`**

> å½“ç”¨ `!` ä½œå‡½æ•°è¿”å›ç±»å‹çš„æ—¶å€™ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ°¸ä¸è¿”å›( diverge function )ï¼Œç‰¹åˆ«çš„ï¼Œè¿™ç§è¯­æ³•å¾€å¾€ç”¨åšä¼šå¯¼è‡´ç¨‹åºå´©æºƒçš„å‡½æ•°ï¼š
>
> ```rust
> fn dead_end() -> ! {
>   panic!("ä½ å·²ç»åˆ°äº†ç©·é€”æœ«è·¯ï¼Œå´©æºƒå§ï¼");
> }
> ```
>
> ä¸‹é¢çš„å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œè¯¥å¾ªç¯æ°¸ä¸è·³å‡ºï¼Œå› æ­¤å‡½æ•°ä¹Ÿæ°¸ä¸è¿”å›ï¼š
>
> ```rust
> fn forever() -> ! {
>   loop {
>     //...
>   };
> }
> ```

### 2.3 æ‰€æœ‰æƒå’Œå€Ÿç”¨

