---
name: 《C#高级编程》学习笔记（11）
title: 《C#高级编程》学习笔记（11）
tags: ["技术","学习笔记","C#高级编程"]
categories: 学习笔记
info: "C#高级编程 第13章 C#函数式编程"
time: 2023/8/1
desc: 'C#高级编程, 学习笔记, 第13章 C#函数式编程'
keywords: ['学习笔记', 'C#', 'C#高级编程', '第13章 C#函数式编程']

---

#  《C#高级编程》学习笔记（11）

## 第13章 C#函数式编程

C# 从来都不是纯面向对象的编程语言，从一开始 C# 就是面向组件的编程语言，即除了提供了面向对象的继承和多态特性以外，还提供了更多基于其他类型编程范式的功能，比如说函数式编程。

函数式编程的最重要概念基于两种方法：避免状态突变，以及将函数作为一等公民。

#### 13.1.1 避免状态突变

在典型的函数式语言 F# 中，对象可以在构造函数中初始化，但以后不能修改，如果需要可变性，该类型就需要显式地声明为可变的，这点与 C# 不同。

使用不可变类型的优点是保证没有人可以更改实例。

![12-3.png](./images/12-3.png)

#### 13.1.2 函数作为一等公民

这意味着函数可以用作函数的参数，函数可以从函数中返回，函数可以赋予变量。

在 C# 中，委托可以保留函数的地址，也可以用作方法的参数，也可以从方法中返回委托。但需要注意，委托会创建一个委托类的实例，因此有一些相关的性能开销。

### 13.2 表达式体的成员

在类的构造函数中，可以仅通过一条表达式代码即完成一些成员的定义。

![12-4.png](./images/12-4.png)

实际使用：

![12-5.png](./images/12-5.png)

### 13.3 扩展方法

将委托作为参数传入方法中，有助于扩展方法。

使用 using 语句将委托使用到的参数包裹起来，有助于在使用之后释放该参数的内存。

> ChatGPT：
>
> 在C#中，`using`语句是一种用于管理资源的语法结构。它用于确保在使用完资源后，及时释放资源，以避免资源泄漏。
>
> `using`语句的一般语法如下：
>
> ```csharp
> using (resource)
> {
>     // 使用资源的代码
> }
> ```
>
> `resource`是需要在代码块结束时自动释放的资源对象，它必须实现`IDisposable`接口。`IDisposable`接口定义了一个`Dispose`方法，用于释放资源。
>
> 当进入`using`代码块时，会自动创建`resource`对象，并在代码块结束时调用`resource`对象的`Dispose`方法进行资源释放。即使在代码块中发生异常，也会确保资源得到释放。
>
> 下面是一个使用`using`语句的示例，用于操作文件流：
>
> ```csharp
> using (FileStream fs = new FileStream("data.txt", FileMode.Open))
> {
>     // 使用文件流进行读写操作
> }
> ```
>
> 在上述示例中，`FileStream`是一个实现了`IDisposable`接口的类，通过使用`using`语句，可以确保在使用完文件流后，自动释放文件流所占用的资源。
>
> 需要注意的是，`using`语句只能用于管理实现了`IDisposable`接口的资源对象。对于不需要显式释放的资源，如内存中的对象，不需要使用`using`语句。
>
> 总结起来，`using`语句是C#中用于管理资源的语法结构，通过自动调用`Dispose`方法，确保资源在使用完后得到及时释放，避免资源泄漏。

### 13.4 using static 声明

使用 using static 声明可以去除类名前缀。如：

```csharp
using static System.Console;

// 下面的代码
Console.WriteLine("Hello World!");

// 可以改为
WriteLine("Hello World!");
```

需要确保在打开类的其他静态成员时不要陷入冲突，或者在使用静态方法时不要使用了其基类的方法。

### 13.5 本地函数















> 本次阅读至 P313  13.5 本地函数 下次阅读应至 P328 有用的一共也就17章