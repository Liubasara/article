---
name: 《深入设计模式》学习笔记（9）
title: 《深入设计模式》学习笔记（9）
tags: ["技术","学习笔记","深入设计模式"]
categories: 学习笔记
info: "深入设计模式 第8章 结构型模式 8.1 适配器"
time: 2022/2/23
desc: '深入设计模式, 学习笔记, 第8章 结构型模式 8.1 适配器'
keywords: ['深入设计模式', '前端', '学习笔记', '第8章 结构型模式', '8.1 适配器']
---

# 《深入设计模式》学习笔记（9）

## 第8章 结构型模式

结构型模式将介绍如何将对象和类组装成较大的结构，并同时保持结构的灵活和高效。

本章介绍以下模式：

- 适配器：让接口不兼容的对象能够相互合作
- 桥接：将一个大类或一系列紧密相关的类拆分为抽象和实现两个独立的层次结构，从而能在开发时分别使用
- 组合：你可以使用它将对象组合成树状结构，并且能够像使用独立对象一样使用它们
- 装饰：允许你通过，将对象放入包含行为的特殊封装对象中的途径，来为原对象绑定新的行为
- 外观：能为程序库、框架或其他复杂类提供一个简单的接口。
- 享元：摒弃了在每个对象中保存所有数据的方式，通过共享多个对象所共有的相同状态，让你能在有限的内存容量中载入更多对象。
- 代理：让你能够提供对象的替代品或者其占位符。代理控制着对于原对象的访问，并允许在将请求提交给对象前后进行一些处理。

### 8.1 适配器

适配器模式能使不兼容的对象能够相互合作。

#### 问题

在开发过程中，可能会遇到需要兼容不同格式的数据的情况（比如 JSON 数据和 XML 数据），如果要修改程序库使其支持 XML 的话，可能需要修改部分源代码。

#### 解决方案

这时可以创建一个适配器。这是一个特殊的对象，能够转换对象接口，使其能够与其他对象进行交互。被封装的对象不会察觉到适配器的存在，它的运作方式是：

1. 适配器实现与其中一个现有对象兼容的接口
2. 现有对象可以使用该接口安全地调用适配器方法
3. 适配器方法被调用后将以另一个对象兼容的格式和顺序将请求传递给该对象

需要的话，甚至可以创建一个双向适配器来实现双向转换调用。

![7-17.png](./images/7-17.png)

#### 结构

##### 对象适配器

实现时使用了构成原则：适配器实现了其中一个对象的接口，并对另一个对象进行封装。

![7-18.png](./images/7-18.png)

1. **客户端**：包含当前程序业务逻辑的类
2. **客户端接口**：描述了其他类与客户端代码合作时必须遵循的协议
3. **服务**：里面有一些功能类（通常来自第三方或者遗留系统），其接口有部分与客户端不兼容，无法直接调起功能
4. **适配器**：是一个可以同时与客户端和服务交互的类：它在实现客户端接口的同时封装了服务对象，接受客户端通过适配器接口发起的调用，并将其转换为适用于被封装服务对象的调用。
5. 综上，客户端代码只需要通过接口与适配器交互，而无需与具体的适配器类进行耦合，因此，你可以向程序中添加新类型的适配器而无需修改已有代码，这在服务类的接口被更改或替换时很有用。

##### 类适配器

![7-19.png](./images/7-19.png)

1. 这种模式**仅能在支持多重继承的编程语言中实现**，类适配器不需要封装任何对象，因为它同时继承了客户端和服务的行为。适配功能在重写的方法中完成，最后生成的适配器可以替代已有的客户端类进行使用。

#### 伪代码















> 本次阅读至 P149 150，下次阅读应至 163