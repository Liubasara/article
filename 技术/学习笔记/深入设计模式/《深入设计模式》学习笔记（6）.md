---
name: 《深入设计模式》学习笔记（6）
title: 《深入设计模式》学习笔记（6）
tags: ["技术","学习笔记","深入设计模式"]
categories: 学习笔记
info: "深入设计模式 第7章 创建型模式 7.3 生成器"
time: 2022/2/20
desc: '深入设计模式, 学习笔记, 第7章 创建型模式 7.3 生成器'
keywords: ['深入设计模式', '前端', '学习笔记', '第7章 创建型模式', '7.3 生成器']
---

# 《深入设计模式》学习笔记（6）

## 第7章 创建型模式

### 7.3 生成器

生成器使你能够分步骤创建复杂对象。该模式允许你使用相同的创建代码来生成不同类型和形式的对象。

#### 问题

假如有一个复杂对象，在对其进行构造的时候，需要对诸多的成员变量和嵌套对象进行繁复的初始化工作。而这些初始化代码相当复杂，甚至有可能散落在客户端代码的多个位置。

在这种情况下，在学习生成器模式之前，通常有两种做法：

1. 扩展基类，然后创造一系列涵盖所有参数组合的子类，这样做看起来很合理，但最终会导致非常多的子类出现，任何新增的参数（例如新的产品类型）都会让这个层次结构更加复杂。
2. 另一种方法是无需生成子类。可以在基类中创建一个包括所有可能的超级构造函数，用它来控制对象的类型。这样可以避免生成子类，但是会导致另外一个问题，那就是参数过多，使得构造函数的调用十分不简洁。

![7-9.png](./images/7-9.png)

#### 解决方案

生成器模式建议将对象构造代码从产品类中抽取出来，并将其放入一个名为生成器的独立对象中。

![7-10.png](./images/7-10.png)

该模式会将对象的构造过程划分为一组步骤，比如`buildWalls`和`buildDoor`等等。每次创建对象时，需要通过生成器对象执行一系列步骤。**重点在于你无需调用所有步骤**，而只需要调用创建特定对象配置所需的那些步骤即可。

当需要创建不同形式的产品时，一些构造步骤可能需要不同的实现，在这种情况下，可以创建多个不同的生成器，用不同方式实现一组相同的创建步骤，然后在创建过程中使用这些生成器来生成不同类型的对象。

#### 主管

可以进一步将用于创建产品的一系列生成器步骤调用抽取称为单独的主管类。主管类可以定义创建步骤的执行顺序，而生成器则提供这些步骤的实现。









> 本次阅读至 P101 102，下次阅读应至 115