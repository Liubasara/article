---
name: 《Linux命令行》学习笔记（九）
title: 《Linux命令行》学习笔记（九）
tags: ["技术","学习笔记","Linux命令行与shell脚本编程大全"]
categories: 学习笔记
info: "第11章 构建基本脚本"
time: 2020/5/7
desc: 'Linux命令行与shell脚本编程大全, 资料下载, 学习笔记, 第11章 构建基本脚本'
keywords: ['Linux命令行与shell脚本编程大全', 'shell学习', '学习笔记', '第9章 安装软件程序', '第11章 构建基本脚本']
---

# 《Linux命令行》学习笔记（九）

---

第二部分 shell 脚本编程基础

---

## 第11章 构建基本脚本

本章开始讨论编写 shell 脚本的基础知识

### 11.1 使用多个命令

shell 可以让你将多个命令串起来一次执行完成。如果要两个命令一起运行，可以将它们放在同一行中彼此用分号隔开。

```shell
# 显示了当前日期和时间，后面紧跟着who命令的输出，显示当前是谁登录到了系统上
date ; who
```

使用这种办法就能将任意多个命令串连在一起使用了，只要不超过大命令行字符数255就行。

### 11.2 创建 shell 脚本文件

在创建 shell 脚本文件时，必须在文件的第一行指定要使用的 shell。格式为：

```shell
#!/bin/bash
```

**shell 脚本文件的第一行不会处理以 # 为开头的注释，而后面的惊叹号会告诉你 shell 用哪个 shell 来运行脚本。**

在制定了 shell 之后就可以在文件的每一行中输入命令然后加一个回车符，使用 # 号来添加注释。

也可以根据需要，使用分号将两个命令放在一行上，但在 shell 脚本中，你可以在独立的行中书写命令。

在执行 shell 之前，要让 shell 找到你所写的脚本，可以通过以下两种做法：

- 将 shell 脚本文件所处的目录添加到 PATH 环境变量中
- 在提示符中用绝对或相对文件路径来引用 shell 脚本

### 11.3 显示消息

可以使用`echo`命令来显示消息告诉用户脚本正在做什么。

```shell
echo hi
# hi
echo "hi"
# hi
echo '"hi"'
# "hi"
```

如果想要把文本字符串的命令和命令输出显示在同一行，可以使用`-n`参数（需要在字符串的两侧使用引号，保证要显示的字符串尾部有一个空格。）

```shell
#!/bin/bash
echo -n "现在的时间是: "
date
# The time and date are: Mon Feb 21 15:42:23 EST 2014 
```

如上所示。

### 11.4 使用变量

#### 11.4.1 环境变量

可以在环境变量名称之前加上美元符($)来使用这些环境变量。

```shell
echo HOME: $HOME
```

echo 命令中的环境变量会在脚本运行时替换成当前值，即便在双引号中，shell 依然能够知道并识别变量。

如果要显示 $ 符号，则需要在符号面前添加反斜线。

```shell
echo \$
# $
```

#### 11.4.2 用户变量

用户变量可以是任何由字母、数字或下划线组成的文本字符串，长度不超过20个。用户变量区分大小写。

使用等号将值赋给用户变量，但在变量、等号和值之间不能出现空格。

用户变量在定义后同样可通过美元符引用。

```shell
var1=10
var2=testing
echo "$var1 $var2"
# 10 testing
```

**引用一个变量值时需要使 用美元符，而引用变量来对其进行赋值时则不要使用美元符**。

#### 11.4.3 命令替换

有两种方法可以将命令输出赋给变量：

- 反引号(`)
- $() 格式

```shell
echo  `echo $HOSTNAME`
# or
echo $(echo $HOSTNAME)
```

shell 会运行命令替换符号中的命令。

### 11.5 重定向输入和输出

bash shell 提供了几个操作符可以将命令的输出重定向到另一个位置。重定向可以用于输入也可以用于输出，可以将文件重定向到命令输入。

#### 11.5.1 输出重定向

用大于号（>）可以将命令的输出发送到一个文件中。`command > outputfile`

如果不想覆盖文件原有内容，而是要将命令的输出追加到已有文件中，可以用双大于号（>>）来追加数据。

#### 11.5.2 输入重定向







> 阅读至P217 232