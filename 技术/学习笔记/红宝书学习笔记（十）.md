---
name: 红宝书学习笔记（十）
title: 红宝书（javascirpt高级程序设计）学习笔记（十）
tags: ['读书笔记', '红宝书', 'javascript高级程序设计']
categories: 学习笔记
info: "人类的好伙伴，红宝书（十）"
time: 2019/2/4
desc: 'javascirpt高级程序设计, 红宝书, 资料下载, 学习笔记, 第14章'
keywords: ['前端', '红宝书笔记', '学习笔记', '第14章 表单脚本']
---

# 红宝书（javascirpt高级程序设计）学习笔记（十）

## 第14章 表单脚本

**本章介绍表单，虽然随着Ajax等异步传输手段的流行，表单脚本在很多开发场景都被弃用，但是理解它对于理解浏览器的工作原理和进一步深入了解JavaScript都是有帮助的，所以本章建议快速阅读，理解要点。**

### 14.1 表单的基础知识

在HTML中，表单由`<form>`元素来表示，在JavaScript中，表单对应`HTMLFormElement`类型。取得`<form>`元素的引用方式有好几种，可以添加id特性用`getElementById()`来引用，也可以通过`document.forms`来取得页面中的所有表单。

```javascript
var firstForm = document.forms[0] // 通过位置索引取得页面中的第一个表单
var myForm = document.forms["form2"] // 取得页面中name为form2的表单
```

#### 14.1.1 提交表单

通过将`<input>`或`<button>`的`type`属性设置为"submit"就可以提交表单，而涂销赶牛则是通过将input标签的type特性设置为"image"来定义。

只要表单中存在任何一种按钮，在响应表单控件拥有焦点的情况下，按回车键就可以提交该表单（`textarea`元素是一个例外，在文本区中回车会导致换行）

同时，在JavaScript中通过对form表单元素调用`submit()`方法，也能正常提交表单。

在调用`submit()`方法提交表单时，不会触发`submit`事件，因此要记得在调用该方法前验证表单数据。

利用`onsubmit`事件处理程序可以用于处理表单提交后的操作。

#### 14.1.2 重置表单

使用type特性为"reset"的`<input>`或`<button>`元素都可以创建重置按钮。也可以在JavaScript对form表单元素使用`reset()`方法来重置，与`submit`不一样的是，使用`reset()`方法会触发`reset`事件。

#### 14.1.3 表单字段

每个表单元素都有一个`elements`属性，该属性是表单中所有表单元素（字段）的集合。如`<input>`、`<button>`、`<textarea>`、`<fieldset>`。

1. 共有的表单字段属性

   除了`<fieldset>`元素外，所有的表单字段都拥有相同的一组属性。如下

   - disabled：布尔值，表示当前字段是否被禁用
   - form：指向当前字段所属表单的**指针**，**只读**
   - name：当前字段的名称
   - readOnly：布尔值，表示当前字段是否只读
   - tabIndex：表示当前字段的切换(tab)序号
   - type：当前字段类型，如"checkbox"、"radio"等等
   - value：当前字段将被提交给服务器的值，对文件字段来说，这个属性时只读的

   以上几种属性，除了`form`属性以外，其它皆可被动态修改。（`<input>`和`<button>`元素的type属性可以动态修改，但`<select>`元素的type属性时只读的）

2. 共有的表单字段方法

   每个表单字段都有两个方法：`focus()`和`blur()`。前者的作用是让元素获取输入焦点，而后者是让元素失去焦点。此外，HTML5中表单还新增了一个`autofocus`属性，设置这个属性讲可以自动把焦点移到相应字段，如下

   ```html
   <input type="text" autofocus>
   ```

3. 共有的表单字段事件

   所有表单字段都支持三种事件：

   - blur：当前字段失去焦点时触发
   - change：对于`<input>`和`<textarea>`元素，在它们失去焦点并且`value`值改变时触发，对于`<select>`元素，在其选项改变时触发
   - focus：当前字段获得焦点时触发

   要特别注意的是，对于`blur`和`change`事件的发生顺序，浏览器并没有作严格规定，不同浏览器可能会有不同的顺序。

### 14.2 文本框脚本

在HTML中，有两种方式表现文本框：`<input>`单行文本框和`<textarea>`多行文本框。

下面展示了一个能够显示25个字符，但输入不超过50个字符的单行文本框。

以及一个单行能显示5个字符，显示25行的多行文本框。

```html
<input type="text" size="25" maxlength="50" value="initial value">
<textarea rows="25" cols="5">initial value</textarea>
```

在这里不建议使用DOM方法中的`setAttribute()`方法去设置`<input>`元素中的value特性，也不要去修改`<textarea>`元素的第一个子节点，原因是**对`value`属性所作的修改不一定会反应在DOM中**。

#### 14.2.1 选择文本

两种文本框都支持`select()`方法，用于选择文本框中的所有文本。而在调用`select()`方法或用户选择后，也会触发一个`select`事件。选择文本后，文本框元素的`selectionStart`和`selectionEnd`会随之改变，使用`substring(selectionStart, selectionEnd)`即可以取出被选择的文本。

> 本次阅读至P423 14.2.2 过滤输入