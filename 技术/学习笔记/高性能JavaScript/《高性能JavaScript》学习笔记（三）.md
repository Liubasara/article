---
name: 《高性能JavaScript》学习笔记（三）
title: 《高性能JavaScript》学习笔记（三）
tags: ['读书笔记', '高性能JavaScript']
categories: 学习笔记
info: "高性能JavaScript 第4章 算法和流程控制, 第5章 正则表达式 第六章 相应接口"
time: 2019/4/29
desc: '高性能JavaScript, 资料下载, 学习笔记, 第4章 算法和流程控制, 第5章 正则表达式, 第六章 相应接口'
keywords: ['高性能JavaScript资料下载', '前端', '高性能JavaScript', '学习笔记', '第4章 算法和流程控制', '第5章 正则表达式', '第六章 相应接口']
---

# 《高性能JavaScript》学习笔记（三）

## 第4章 算法和流程控制

代码整体结构是执行速度的决定性因素之一。性能损失与代码组织方式和具体问题解决办法直接相关。

### 循环

#### 循环性能

在 JavaScript 提供的四种循环类型(for, while, do-while, for...in)中(现在是5种了，还有一种 for...of)，只有一种循环比其他循环明显要慢：for...in 循环。除此以外，其他循环类型性能相当。

#### 基于函数的迭代

**forEach()**方法

此方法遍历一个数组的所有成员，并在每个成员上执行一个函数。该函数在调用时接收三个参数，它们是：数组项的值，数组项的索引，数组自身。

在现代浏览器中，使用 forEach 来循环迭代数组比用 for 循环的效率更高，速度更快。

### 条件表达式

**if-else 与 switch 比较**

如果条件较少时，if-else 容易阅读，而条件较多时，switch 更容易阅读。

大多数情况下 switch 表达式比 if-else 更快，但只有当条件体数量很大时才明显。

**查表法**

查表法访问数据比 if-else 或者 switch 更快，特别当条件体数目很大时。

**Recursion 递归**

复杂算法比较容易使用递归实现。

递归函数的问题是，一个错误定义，或者缺少终结条件可能会导致长时间运行，冻结用户界面。**此外，递归函数还会遇到浏览器调用栈大小的限制**。

当使用了太多的递归，超过最大调用栈尺寸时，浏览器会出错并在控制台上报出报错信息。

**迭代**

任何可以用递归实现的算法都可以用迭代实现。迭代算法通常包括几个不同的循环，分别对应算法过程的不同方面，同时也会导致自己的性能问题。

使用优化的循环替代长时间运行的递归函数可以降低开销，优化性能。

## 第5章 正则表达式

在 JavaScript 中，正则表达式是必不可少的东西，它的重要性远超过琐碎的字符串处理。

### 字符串连接

```javascript
str += "one" + "two"
```

上面的代码时连接字符串最常用的方法，在此代码的执行期间，会发生四个步骤：

1. 内存中创建了一个临时字符串
2. 临时字符串的值被赋予"onetwo"
3. 临时字符串与 str 的值进行连接
4. 结果赋予 str

这基本就是浏览器完成这一任务的过程。

为了浏览器性能的提升，我们应该尽量避免使用临时字符串。如上面的代码可以改写为`str = str + "one" + "two"`，就可以避免使用临时字符串了。

### 正则表达式优化

粗浅的编写正则表达式是造成性能瓶颈的主要原因。两个正则表达式匹配相同的文本并不意味着他们具有同等的速度。

#### 正则表达式工作原理

正则表达式处理的基本步骤：

- 编译
- 设置起始位置
- 匹配每个正则表达式的字元
- 匹配成功或失败

只有字符串中的每个字符都经历了这样的过程以后，还没有成功匹配，那么正则表达式才会宣布彻底失败。

**理解回溯**

回溯是匹配过程的基本组成部分。气很大程度上也是正则表达式如此强大的根源。然而，回溯计算代价昂贵，如果你不够小心的话则容易失控。

当一个正则表达式扫描目标字符串时，它从左到右逐个扫描正则表达式的组成部分，在每个位置上测试能不能找到一个匹配。对于每一个量词和分支，都必须决定如何继续进行。

PS: 正则表达式的章节留到以后再详细阅读...

## 第6章 相应接口

> 本次阅读至 184