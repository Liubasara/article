---
name: 红宝书学习笔记（十二）
title: 红宝书（javascirpt高级程序设计）学习笔记（十二）
tags: ['读书笔记', '红宝书', 'javascript高级程序设计']
categories: 学习笔记
info: "人类的好伙伴，红宝书（十二） 第16章 HTML5脚本编程"
time: 2019/2/12
desc: 'javascirpt高级程序设计, 红宝书, 资料下载, 学习笔记, 第16章'
keywords: ['前端', '红宝书笔记', '学习笔记', '第16章 HTML5脚本编程']
---

# 红宝书（javascirpt高级程序设计）学习笔记（十二）

## 第16章 HTML5脚本编程

**本章基本介绍的是HTML5的各种新特性、新标签、新API，建议大致了解，做好笔记。**

### 16.1 跨文档消息传递

跨文档消息传送简称XDM，指的是在来自不同域的页面间传递消息。对于XDM来说，也就是在不同的`<iframe>`之间传递数据。

XDM的核心是`postMessage()`方法，该方法接收两个参数：一条消息和一个表示消息接收方来自哪个域的字符串。

```javascript
// 所有支持XDM的浏览器也都支持iframe的contentWindow属性
var iframeWindow = document.getElementById("myframe").contentWindow
iframeWindow.postMessage('A secret', 'http://blog.liubasara.com')
```

第二个参数对保障安全通信非常重要，可以防止浏览器把消息发送到不安全的地方。如果第二个参数是`"*"`，则表示可以把消息发送给来自任何域的文档。

接收到XDM消息时，会触发`window`对象的`message`事件，其事件`event`对象有以下三个重要信息：

- data：传入的字符串数据
- origin：发送消息的文档所在的域
- source：发送消息的文档`window`对象的代理，可利用该对象来发送回执

最后，有些浏览器已经实现了可以使用`postMessage()`方法来传输任意格式的JavaScript数据，但为了兼容起见，最好还是将数据转换为字符串格式来传递。

### 16.2 原生拖放

即通过鼠标完成图像，文本或其他元素的拖放。

#### 16.2.1 拖放事件



>  本次阅读应至482 16.2.1 拖放事件 501